<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tabela de Servi√ßos de Inform√°tica</title>
    <style>
        * { box-sizing: border-box; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; }
        body {
            background: #f5f5f5;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 20px;
            margin-top: 30px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            max-width: 420px;
            width: 100%;
        }
        h2 { text-align: left; color: #333; margin-bottom: 20px; }
        .service {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .service label {
            display: flex;
            align-items: center;
            flex-grow: 1;
            cursor: pointer;
        }
        .service input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2); 
        }
        .service .preco {
            font-weight: 600;
            color: #007bff; 
            text-align: right;
            width: 80px;
        }
        /* Estilo para itens desabilitados */
        .service input:disabled + span {
            color: #aaa;
            cursor: not-allowed;
        }
        .service input:disabled + span + .preco {
            color: #aaa;
            text-decoration: line-through;
        }
        .form {
            margin-top: 25px;
            border-top: 1px solid #ddd;
            padding-top: 15px;
        }
        .form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .form input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }
        .total-box {
            border: 2px solid #007bff;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 6px;
            background-color: #e9f5ff; 
            display: flex;
            justify-content: space-between;
            font-weight: 700;
            font-size: 1.2em;
        }
        button {
            width: 100%;
            background-color: #25D366; 
            border: none;
            color: white;
            padding: 12px;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover { background-color: #128C7E; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Servi√ßos de Inform√°tica</h2>

        <div id="services">
            <div class="service" data-preco="60.00"><label><input type="checkbox" id="serv0" onchange="validarSelecao()"> <span>Limpeza</span></label><span class="preco">R$ 60,00</span></div>
            <div class="service" data-preco="80.00"><label><input type="checkbox" id="serv1" onchange="validarSelecao()"> <span>Formata√ß√£o (Inclui Sistema Operacional)</span></label><span class="preco">R$ 80,00</span></div>
            <div class="service" data-preco="120.00"><label><input type="checkbox" id="serv2" onchange="validarSelecao()"> <span>Formata√ß√£o com Backup de dados</span></label><span class="preco">R$ 120,00</span></div>
            <div class="service" data-preco="120.00"><label><input type="checkbox" id="serv3" onchange="validarSelecao()"> <span>Formata√ß√£o + Limpeza</span></label><span class="preco">R$ 120,00</span></div>
            <div class="service" data-preco="150.00"><label><input type="checkbox" id="serv4" onchange="validarSelecao()"> <span>Formata√ß√£o c/ Backup + Limpeza</span></label><span class="preco">R$ 150,00</span></div>
            <div class="service" data-preco="50.00"><label><input type="checkbox" id="serv5" onchange="validarSelecao()"> <span>Instala√ß√£o de Programas</span></label><span class="preco">R$ 50,00</span></div>
        </div>

        <div class="form">
            <div class="total-box">
                <span>TOTAL DO SERVI√áO:</span>
                <span id="valorTotal">R$ 0,00</span>
            </div>

            <label for="nome">Nome:</label>
            <input type="text" id="nome" placeholder="Seu nome">

            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" placeholder="(DDD) 00000-0000">

            <button onclick="enviar()">Solicitar Or√ßamento via WhatsApp</button>
        </div>
    </div>

    <script>
        // Total de servi√ßos √© 6 (de 0 a 5)
        const NUM_SERVICOS = 6;
        const servicosElements = document.querySelectorAll('.service');
        const checkboxes = Array.from({ length: NUM_SERVICOS }, (_, i) => document.getElementById(`serv${i}`));
        
        // Nomes dos servi√ßos atualizados (6 itens)
        const nomesServicos = [
            "Limpeza",
            "Formata√ß√£o (Inclui Sistema Operacional)",
            "Formata√ß√£o com Backup de dados",
            "Formata√ß√£o + Limpeza",
            "Formata√ß√£o c/ Backup + Limpeza",
            "Instala√ß√£o de Programas"
        ];
        
        // Fun√ß√£o que combina valida√ß√£o e c√°lculo (mantida)
        function validarSelecao() {
            let total = 0;
            const selecionados = checkboxes.map((cb, i) => cb.checked ? i : null).filter(val => val !== null); // √çndices (0-5) selecionados

            // 1. REATIVA TUDO ANTES DE APLICAR NOVAS REGRAS
            checkboxes.forEach(cb => {
                cb.disabled = false;
            });

            // 2. GERENCIAMENTO DE CONFLITOS (Regras ajustadas aos novos √≠ndices)

            // Regra 1: Se Limpeza (0) for selecionado, permite apenas 0, 1, 5
            if (selecionados.includes(0)) {
                const allowedIndices = [0, 1, 5]; 
                checkboxes.forEach((cb, i) => {
                    if (!allowedIndices.includes(i)) {
                        cb.disabled = true;
                        if (cb.checked) cb.checked = false; 
                    }
                });
            }

            // Regra 2: Se Formata√ß√£o com Backup (2) for selecionado, permite apenas 2, 0, 5
            if (selecionados.includes(2)) {
                const allowedIndices = [2, 0, 5]; 
                checkboxes.forEach((cb, i) => {
                    if (!allowedIndices.includes(i)) {
                        cb.disabled = true;
                        if (cb.checked) cb.checked = false;
                    }
                });
            }

            // Regra 3: Se Formata√ß√£o + Limpeza (3) for selecionado, permite apenas 3, 5
            if (selecionados.includes(3)) {
                const allowedIndices = [3, 5];
                checkboxes.forEach((cb, i) => {
                    if (!allowedIndices.includes(i)) {
                        cb.disabled = true;
                        if (cb.checked) cb.checked = false;
                    }
                });
            }

            // Regra 4: Se Formata√ß√£o c/ Backup + Limpeza (4) for selecionado, permite apenas 4, 5
            if (selecionados.includes(4)) {
                const allowedIndices = [4, 5];
                checkboxes.forEach((cb, i) => {
                    if (!allowedIndices.includes(i)) {
                        cb.disabled = true;
                        if (cb.checked) cb.checked = false;
                    }
                });
            }
            
            // 3. C√ÅLCULO FINAL (Ap√≥s as desativa√ß√µes)
            servicosElements.forEach(serviceElement => {
                const checkbox = serviceElement.querySelector('input[type="checkbox"]');
                if (checkbox.checked && !checkbox.disabled) {
                    const preco = parseFloat(serviceElement.getAttribute('data-preco'));
                    total += preco;
                }
            });

            // 4. EXIBI√á√ÉO DO TOTAL
            const totalFormatado = total.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            document.getElementById('valorTotal').textContent = totalFormatado;
        }

        // FUN√á√ÉO ENVIAR COM NOVO EMOJI E CORRE√á√ÉO DE QUEBRA DE LINHA
        function enviar() {
            const nome = document.getElementById('nome').value.trim();
            const telefone = document.getElementById('telefone').value.trim();
            
            const selecionados = [];
            let total = 0;

            servicosElements.forEach((serviceElement, i) => {
                const checkbox = serviceElement.querySelector('input[type="checkbox"]');
                
                if (checkbox.checked && !checkbox.disabled) {
                    const preco = parseFloat(serviceElement.getAttribute('data-preco'));
                    total += preco;

                    const nomeServico = nomesServicos[i];
                    const precoFormatado = parseFloat(preco).toLocaleString('pt-BR', { minimumFractionDigits: 2 });
                    
                    selecionados.push(`- ${nomeServico} (R$ ${precoFormatado})`);
                }
            });

            if (selecionados.length === 0) {
                alert('Selecione pelo menos um servi√ßo para solicitar o or√ßamento.');
                return;
            }
            
            if (!nome || !telefone) {
                alert('Por favor, preencha seu Nome e Telefone.');
                return;
            }
            
            // Monta a mensagem final formatada
            const totalFormatadoFinal = total.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
            
            // NOVO EMOJI: ü§ù (Aperto de m√£o)
            const texto = `ü§ù Ol√°! Me chamo *${nome}* e gostaria de solicitar um or√ßamento para os seguintes servi√ßos:

*Servi√ßos Selecionados:*
${selecionados.join('\n')}

*TOTAL ESTIMADO:* R$ ${totalFormatadoFinal}
*Meu telefone:* ${telefone}
`;

            // CORRE√á√ÉO DE QUEBRA DE LINHA: Codifica o texto e substitui \n por %0A
            const textoCodificado = encodeURIComponent(texto).replace(/%0A/g, '\n').replace(/\n/g, '%0A');

            const numeroWhatsApp = '19993444657'; // <--- **MUDE ESTE N√öMERO PARA O SEU**
            const url = `https://wa.me/55${numeroWhatsApp.replace(/\D/g, '')}?text=${textoCodificado}`;

            window.open(url, '_blank');
        }

        // Inicializa a p√°gina e o c√°lculo ao carregar
        window.onload = validarSelecao;
    </script>
</body>
</html>
